# GitLab CODEOWNERS Management Tool

A simple, web-based tool to scan a GitLab group for projects that are missing a `CODEOWNERS` file. It helps enforce code ownership policies by identifying non-compliant repositories and providing a one-click solution to create a merge request with a suggested `CODEOWNERS` file.

The suggestions for code owners are dynamically generated by analysing the approvers of recently merged merge requests.

## Key Features

* **Web-Based UI:** An easy-to-use interface to configure and run scans. No command-line interaction is needed after the initial setup.
* **Automated Group Scanning:** Recursively scans all projects within a specified GitLab group, including its subgroups.
* **Dynamic Owner Suggestions:** Intelligently suggests code owners by identifying the most frequent approvers of merge requests from the last 90 days.
* **Interactive MR Creation:** After a scan, the user can review the list of affected projects and trigger the creation of merge requests for all of them with a single click.
* **Configuration Persistence:** The web interface remembers your GitLab URL, group path, and API token in your browser's local storage for convenience.
* **Containerized & Portable:** The entire application runs inside a Docker container, making the setup process clean, consistent, and independent of your host operating system.

## Prerequisites

Before you begin, you will need the following installed on your machine:

1.  [**Docker**](https://docs.docker.com/get-docker/)
2.  [**Docker Compose**](https://docs.docker.com/compose/install/) (usually included with Docker Desktop for Windows and Mac).

## Setup & Configuration

### 1. Get the Code

If you are using Git, clone the repository. Otherwise, ensure all the project files (`app.py`, `Dockerfile`, etc.) are in a single directory on your machine.

### 2. Obtain a GitLab Personal Access Token

This tool requires a GitLab Personal Access Token to communicate with the GitLab API on your behalf.

1.  Log in to your GitLab account.
2.  Go to your **Preferences** by clicking your avatar in the top right corner.
3.  Navigate to **Access Tokens** from the left sidebar.
4.  Create a new token with the following settings:
    * **Name:** A descriptive name like `codeowners_tool`.
    * **Expiration date:** Set one as per your security policy.
    * **Scopes:** Select the `api` scope. This provides the necessary permissions to read project data and create branches and merge requests.
5.  **Important:** Copy the generated token immediately and store it somewhere secure. You will not be able to see it again after you leave the page.

**⚠️ Warning:** Treat this token like a password. Do not share it or commit it to a Git repository.

## Running the Application

This project is configured to run easily using Docker Compose.

1.  Open a terminal or command prompt in the root directory of the project.
2.  Build and start the application by running:
    ```sh
    docker-compose up --build
    ```
    This command will build the Docker image and start the web server. You will see log output in your terminal.

3.  Once you see messages from `gunicorn` indicating it's listening, open your web browser and navigate to:
    [**http://localhost:5001**](http://localhost:5001)

## How to Use the Tool (Workflow)

1.  **Enter Configuration:** On the web page, fill in the form:
    * **GitLab Personal Access Token:** Paste the token you generated earlier.
    * **Target Group Path:** Enter the path of the group you want to scan (e.g., `gitlab-org/my-team`).
    * **GitLab URL:** Leave this blank if you are using `gitlab.com`. If you use a self-hosted GitLab instance, enter its base URL (e.g., `https://gitlab.mycompany.com`).

2.  **Start the Scan:** Click the "Start Scan" button. The "Scan Progress" box will show a live log of the projects being scanned.

3.  **Review the Results:** When the scan is complete, a summary will appear at the bottom of the log. If any projects are found to be missing a `CODEOWNERS` file, a new section with a button will appear.

4.  **Create Merge Requests:** Click the **"Create X Merge Request(s)"** button. The progress box will again show a live log as it creates a new branch, commits a `CODEOWNERS` file, and opens a merge request for each affected project.

## Development

This project is set up for hot reloading to make development easier.

1.  Run `docker-compose up` in your terminal.
2.  Edit any of the Python (`app.py`) or HTML (`templates/*.html`) files on your local machine.
3.  When you save a file, the Gunicorn server running inside the container will automatically detect the change and restart.
4.  Refresh your browser to see the effects of your changes.

## Project Structure

```text
.
├── app.py              # The main Flask application and scanner logic
├── Dockerfile          # Defines the Docker image
├── docker-compose.yml  # Defines the development environment and services
├── requirements.txt    # Python dependencies
├── .gitignore          # Files and folders ignored by Git
├── README.md           # This file
└── templates/
    ├── index.html      # Main page with the input form
    ├── layout.html     # Base HTML layout for consistent styling
    └── results_form.html # HTML snippet for displaying scan results and the action button